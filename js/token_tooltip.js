function define(t){t(ace.require,window,void 0)}define(function(t,e,i){"use strict";function o(t){t.tokenTooltip||(r.call(this,t.container),t.tokenTooltip=this,this.editor=t,this.update=this.update.bind(this),this.$timer=s.delayedCall(this.update,100),this.onMouseMove=this.onMouseMove.bind(this),this.onMouseOut=this.onMouseOut.bind(this),h.addListener(t.renderer.scroller,"mousemove",this.onMouseMove),h.addListener(t.renderer.content,"mouseout",this.onMouseOut))}var s=(t("ace/lib/dom"),t("ace/lib/lang")),n=t("ace/lib/oop"),h=t("ace/lib/event"),r=t("ace/tooltip").Tooltip;n.inherits(o,r),function(){this.update=function(){var t=this.editor.renderer,e=t.rect||(t.rect=t.scroller.getBoundingClientRect()),i=(this.x+t.scrollLeft-e.left-t.$padding)/t.characterWidth,o=Math.floor((this.y+t.scrollTop-e.top)/t.lineHeight),s=Math.round(i),n={row:o,column:s,side:i-s>0?1:-1},h=this.editor.session,r=h.screenToDocumentPosition(n.row,n.column);if(myModule.info=null,myModule.send({command:"info",line:r.row+1,column:r.column-1}),!myModule.info)return void this.hide();var d=myModule.info;this.tokenText!=d&&(this.setText(d),this.width=this.getWidth(),this.height=this.getHeight(),this.tokenText=d),this.show(null,this.x,this.y)},this.onMouseMove=function(t){this.x=t.clientX,this.y=t.clientY,this.isOpen&&this.setPosition(this.x,this.y),this.$timer.delay()},this.onMouseOut=function(t){t&&t.currentTarget.contains(t.relatedTarget)||(this.hide(),this.$timer.cancel())},this.setPosition=function(t,e){t+10+this.width>this.maxWidth&&(t=window.innerWidth-this.width-10),(e>.75*window.innerHeight||e+20+this.height>this.maxHeight)&&(e=e-this.height-30),r.prototype.setPosition.call(this,t+10,e+20)},this.destroy=function(){this.onMouseOut(),h.removeListener(this.editor.renderer.scroller,"mousemove",this.onMouseMove),h.removeListener(this.editor.renderer.content,"mouseout",this.onMouseOut),delete this.editor.tokenTooltip}}.call(o.prototype),e.TokenTooltip=o});
